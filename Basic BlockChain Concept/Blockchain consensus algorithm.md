# 합의(Consensus) 알고리즘

## 합의 알고리즘이란?
- 분산 시스템의 모든 프로세스가 같은 결과값을 결정하는 과정
- 에러를 막고 무결성을 보장하기 위함
- 블록의 소유권과 생성 순서를 결정하는 합의 알고리즘 사용



## 합의 알고리즘이 왜 필요한가?
 분산 시스템에서 시스템 간 특정 데이터에 대한 **동일한 값을 유지하기 위해 고안된 개념**이다. 블록체인 또한 분산 원장 시스템이므로 모든 노드가 동일한 하나의 체인을 가질 수 있도록 블록이 생성 및 연결되게 하는 특정 메커니즘을 필요하다.



## 합의 알고리즘의 종류(추가 작성 예정)
- [참고1][1], [참고2][2] 글
1. PoW(Proof of Work)
	- 작업 증명
	- 해시 함수의 결과값이 특정 값보다 작아지도록 하는 입력 값(Nonce)을 찾는 문제
	- Nonce 값을 찾기 위해 숫자를 일일이 넣어봐야하기 때문에 평균 수천~조 번 이상의 시도가 필요
	- 마이닝 풀에서 채굴에 성공한 경우 컴퓨터 파워를 할당한 양만큼 비트코인을 나눠받는 방식
    - 문제점
        - PoW 합의알고리즘을 따르는 블록체인 상의 거래내역을 악의적으로 조작하려면 51%이상의 지분을 확보해야 함 <br> >> 공격자가 막대한 비용을 들여 해킹을 했을 때 얻는 이익이 비용보다 커야하기 때문에 쉽지않음
        - 기본적으로 1개의 CPU당 1개의 투표권을 가짐
        - Top3 마이닝 풀의 컴퓨터 파워가 전세계 50%에 육박하므로 악의적인 목적으로 연합한다면 보안의 큰 위협이 될 수 있다는 문제가 존재
	
	cf. 마이닝 풀
		Nonce 값을 찾는 작업을 한명이 시도하긴 어려우니 특정 단체에 자신의 컴퓨팅 파워를 할당해줘서 채굴을 시도하는데 이때 특정 단체를 마이닝 풀이라고 부름

	cf. 비트코인에서의 보상
		새로 발행되는 비트코인과 해당 블록에 포함된 거래의 거래 수수료들의 합


 2. PoS(Proof of Stake)
	- 지분 증명
	- PoW의 컴퓨팅 파워 낭비 문제를 해결하고자 개발된 합의 알고리즘
	- 참여자의 코인 지분을 기준으로 블록을 생성할 확률이 높은 방식 
    <br> >> 무작위 추출을 통해 중앙 집중화를 예방. 부유한 개인이 항상 다음 블록을 만드는 것을 예방
	- 노드가 보유한 자산을 기준으로 권한을 분배하여 합의를 도출하고 보상을 분배하는 알고리즘
	PoW와 달리 컴퓨팅 파워를 통한 채굴이 존재 X <br> >> 훨씬 적은 에너지를 사용하므로 비용 효율적
	지분을 가지고 블록체인 상의 블록에 대한 유효성을 검증
	- 문제점
	    - 해킹하려면 전세계 자산의 51%을 가져야 하므로 PoW 알고리즘을 따르는 방식보다 비용이 비쌈
	    <br> >> PoW 알고리즘을 따르는 블록체인 네트워크를 해킹하기 위해 51%의 해시파워를 가지는데 들어가는 비용보다 PoS 알고리즘을 따르는 블록체인 네트워크를 해킹하기 위해 전세계 자산의 51%를 차지하는데 드는 비용이 더 크다.


  


  [1]:https://medium.com/landingblock-korea/5-%EB%B8%94%EB%A1%9D%EC%B2%B4%EC%9D%B8-%ED%95%A9%EC%9D%98-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0-1%ED%8E%B8-pow-pos-dpos-21f8e3b2c22a
  
  [2]:https://steemit.com/kr/@kblock/44-1-pow-pos